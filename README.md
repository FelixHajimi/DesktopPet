# 桌面宠物（Desktop Pet）

> 一个可交互、支持插件的桌面宠物，用 Python + PySide6 打造

## 特性

- 🎮 **物理引擎**：重力、碰撞、摩擦力模拟，行为自然
- 🖱️ **交互操作**：点击拖拽、抛掷、暂停
- 🧩 **插件系统**：支持动态加载插件，扩展功能（如表情切换、语音、小游戏等）
- 🧪 **调试模式**：可显示碰撞箱，方便开发
- 🛠️ **无边框置顶窗口**：不干扰工作，始终在桌面最上层
- 📦 **配置驱动**：通过 `config.json` 和 `setting.json` 配置外观与行为

## 🚀 快速开始

### 依赖要求

- Python 3.8+
- PySide6
- 支持 GIF 动画的系统

### 安装依赖

```bash
pip install PySide6
```

### 目录要求

你的项目根目录应包含以下文件:

```text
your-project/
├── main.py                 主程序
├── setting.json            启动设置 (现可修改调试模式，宠物配置路径)
└── [你的宠物文件夹]/        例如：my_cat
    ├── config.json         宠物配置 (名称、作者、图标、插件等)
    ├── icon.gif            宠物图标
    └── basic/
        ├── stand.gif       站立动画
        └── drop.gif        下落动画
```

### 示例 setting.json:
```json
{
  "desktopPetPath": "data/my_cat",        // 宠物配置路径
  "debug": false                          // 调试模式
}
```

### 示例 config.json:
```json
{
  "name": "小橘",                         // 宠物名称
  "version": "1.0.0",                    // 宠物版本
  "author": "ABC",                       // 制作人
  "imagePath": "data/my_cat/res/",       // 图片路径
  "acc": [0.3, 0.5],                     // 重力 (x, y)
  "fri": [0.8, 0.8],                     // 摩擦力 (x, y，仅限于墙体)
  "plugin": [                            // 加载的插件目录
    "data/my_cats/plugin/main"
    ]
}
```

### 运行程序

```bash
python main.py
```

程序将以全屏透明窗口运行，宠物出现在屏幕底部中央

## 🎮 使用说明

- **左键拖拽**：移动宠物，释放后会以手速抛出
- **右键点击**：打开菜单
  - 退出
  - 关于
  - 插件1（如有）
  - 插件2（如有）
  - ...
  - 开/关碰撞箱（调试模式下）
- **插件自动启动**：若插件标记 `__autoStart__ = True`，程序启动时会自动加载

## 🔌 插件开发（高级）

插件需包含 `main.py`，并定义：
- `pluginName`: 插件名称
- `menu`: 菜单项字典，格式为 `{显示名: 对象}`
- 每个菜单项对象需有：
  - `create(...)` 方法（接收 image、timers、state、window 等参数）
  - 可选 `__autoStart__ = True` 实现自启动

> 插件可动态修改宠物动画、行为逻辑、添加新交互等。

## ⚠️ 免责声明

> 本项目采用 **MIT 许可证**。  
> **欢迎修改、分发、商用**，但请在代码中保留原作者信息。  
> **使用本软件风险自负，作者不对任何直接或间接损失负责。**

## 📄 许可证

本项目使用 MIT 许可证 —— 详情请参见 [`LICENSE`](./LICENSE) 文件